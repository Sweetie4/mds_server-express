/*------------Distributeur de billet------------*/
const defaultParams = {
    montant : 10.00,
    devise :"€"
};
export function determineCoupure(param) {
    param = Object.assign({}, defaultParams, param);
    let values = [];
    let result='Vous avez demandé '+param.montant+param.devise+'\n\nVous recevez ';
    let changeType = 0;
    if (param.devise == '$'){
        values = [100,50,20,10,5,2,1,0.50,0.25,0.10,0.05,0.01]
        changeType = 1
    } else if (param.devise == '€'){
        values = [500,200,100,50,20,10,5,2,1,0.50,0.20,0.10,0.05,0.02,0.01] 
        
        changeType = 5
    }
    let coupures=[]
    let type = 'billets'
    let pluriel
    
    // Calcul des billets/pièces
    values.forEach((value,i) => {
    
        coupures.push(Math.floor(param.montant/value))//Calcul du nombre de billet pour la valeur
        if (coupures[i]){ //S'il y en a au moins 1
            type = value<changeType?'pièce':'billet'; //Si la valeur est inférieure à 5, ce sont des pièces
            pluriel = coupures[i]>1?'s':'' //Si il y a plus de 1 pièce/billet, ajouter le puriel
            result+= coupures[i] + ' '+type+pluriel+' de '+value+param.devise+',\n'; //Compléter la phrase de retour
        }
        param.montant= (param.montant%value).toFixed(2) //Mettre à jour le montant
    });
    
    //Remplacer la dernière virgule par un point
    result=result.slice(0,-2)
    result+= '.'
    
    //Remplacer l'avant-dernière virgule par un et
    let index = result.lastIndexOf(',')
    if (index >0){
        result = result.substring(0, index) + ' et' + result.substring(index+1)
    }
    
    // Retourner le résultat
    return result;
}
